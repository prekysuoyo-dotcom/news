<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Radio Bayelsa Live Feed</title>
  <style>
    body, html { margin:0; padding:0; width:100%; height:100dvh; overflow:hidden; background:#000; font-family:sans-serif; }
    .container { 
      display:flex; 
      width:100%; 
      height:100%; 
      transition: transform 0.6s cubic-bezier(0.45, 0, 0.55, 1); 
      will-change: transform;
    }
    .slide { min-width:100%; height:100%; position:relative; cursor:pointer; }
    .slide img { width:100%; height:100%; object-fit:cover; background: #1a1a1a; }
    .overlay { position:absolute; bottom:0; left:0; width:100%; height:70%; background:linear-gradient(transparent, rgba(0, 33, 71, 0.95)); }
    .content { position:absolute; bottom:40px; left:20px; right:20px; color:#fff; z-index: 10; }
    .cat-badge { background:#d32f2f; color:#fff; padding:4px 10px; border-radius:4px; font-weight:bold; font-size:11px; text-transform:uppercase; }
    .headline { font-size:clamp(20px, 5vw, 32px); font-weight:bold; margin:10px 0; line-height:1.2; text-shadow: 0 2px 4px rgba(0,0,0,0.8); }
    .summary-text { font-size: 14px; opacity: 0.9; margin-bottom: 15px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
    .loader { position: fixed; top:0; left:0; width:100%; height:100%; background:#000; color:#fff; display:flex; align-items:center; justify-content:center; z-index:100; flex-direction: column; gap: 10px;}
  </style>
</head>
<body>

  <div id="loader" class="loader">
    <div style="border: 4px solid #f3f3f3; border-top: 4px solid #d32f2f; border-radius: 50%; width: 30px; height: 30px; animate: spin 2s linear infinite;"></div>
    Loading News...
  </div>
  <div class="container" id="slides"></div>

  <script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwV9qf-CdbQOu13E6EuKOlfk4OOuxa08PCaPvI8WJ0DqLBYDNWDa_7MIkVDt19pdFcL0g/exec?feed=news";

    async function loadNews() {
      try {
        const response = await fetch(SCRIPT_URL);
        const data = await response.json();
        
        const cont = document.getElementById('slides');
        const loader = document.getElementById('loader');
        
        if (!data || data.length === 0) {
           loader.innerHTML = "No News Found. Check Sheet Tab 'News'.";
           return;
        }

        cont.innerHTML = data.map((s, i) => {
          let link = s.StoryLink || "https://radiobayelsa.info";
          if(!link.startsWith('http')) link = 'https://' + link;

          return `
            <div class="slide" onclick="window.open('${link}', '_top')">
              <img src="${s.ImageURL}" fetchpriority="${i === 0 ? 'high' : 'low'}">
              <div class="overlay"></div>
              <div class="content">
                <span class="cat-badge">BREAKING NEWS</span>
                <div class="headline">${s.Headline}</div>
                <div class="summary-text">${s.Summary}</div>
                <div style="font-size:11px; opacity:0.8; font-weight:bold;">TAP TO READ FULL ARTICLE â†’</div>
              </div>
            </div>`;
        }).join('');

        loader.style.display = 'none';
        startSlider(data.length);

      } catch (err) {
        document.getElementById('loader').innerHTML = "Connection Refused. <br>Please Deploy Apps Script as 'Anyone'.";
      }
    }

    let idx = 0;
    function startSlider(count) {
      if (count <= 1) return;
      const cont = document.getElementById('slides');
      setInterval(() => {
        idx = (idx + 1) % count;
        cont.style.transform = `translateX(-${idx * 100}%)`;
      }, 6000); 
    }

    window.onload = loadNews;
  </script>
</body>
</html>
